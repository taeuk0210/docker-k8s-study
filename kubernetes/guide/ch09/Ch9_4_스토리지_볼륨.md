# ğŸ“˜ Chapter 9.4 ìŠ¤í† ë¦¬ì§€ ë³¼ë¥¨

## ğŸ“Œ í•™ìŠµ ëª©í‘œ

- ìŠ¤í† ë¦¬ì§€ ë³¼ë¥¨ì˜ ê°œë…
- ìŠ¤í† ë¦¬ì§€ ë³¼ë¥¨ ì‚¬ìš© ë°©ë²•

## ğŸ” í•™ìŠµ ë‚´ìš©

### ğŸ”¸ 9.4.1 ìŠ¤í† ë¦¬ì§€ ë³¼ë¥¨ ê°œë…

ì¿ ë²„ë„¤í‹°ìŠ¤ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ íŒŒì¼ ì‹œìŠ¤í…œ ì—­ì‹œ ë„ì»¤ì²˜ëŸ¼ ì¼ì‹œì ì¸ ìŠ¤í† ë¦¬ì§€ë¥¼ ì œê³µí•œë‹¤  
ë”°ë¼ì„œ ë„ì»¤ì™€ ë¹„ìŠ·í•˜ê²Œ ìŠ¤í† ë¦¬ì§€ë¥¼ ì œê³µí•˜ëŠ”ë° ì´ë•Œ ìŠ¤í† ë¦¬ì§€ëŠ” ë…¸ë“œ ë‚´ë¶€ ì¼ë¶€ ë””ìŠ¤í¬ ê³µê°„ì„  
íŒŒë“œì™€ ê³µìœ í•˜ëŠ” ë°©ì‹ ë˜ëŠ” ë…¸ë“œ ì™¸ë¶€ ìŠ¤í† ë¦¬ì§€ ì‹œìŠ¤í…œê³¼ ì—°ê²°í•˜ëŠ” ë°©ì‹ì´ ìˆë‹¤.

### ğŸ”¸ 9.4.2 emptyDir

emptyDir ë³¼ë¥¨ì´ë€ íŒŒë“œ ë‚´ë¶€ì—ì„œ ì„ì‹œì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë³¼ë¥¨ìœ¼ë¡œ ë…¸ë“œì˜ ë””ìŠ¤í¬ë¥¼ ì¼ì‹œì ìœ¼ë¡œ ì‚¬ìš©  
íŒŒë“œê°€ ìƒì„±ë˜ë©´ emptyDirì€ ì²˜ìŒìœ¼ë¡œ ìƒì„±ë˜ê³  ë…¸ë“œê°€ ì‹¤í–‰í•˜ëŠ” ë™ì•ˆì—ë§Œ ì¡´ì¬í•¨

íŒŒë“œì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆëŠ” emptyDir ë³¼ë¥¨ì˜ íŒŒì¼ì— ì ‘ê·¼í•  ìˆ˜ ìˆìœ¼ë‚˜ ë‹¤ë¥¸ íŒŒë“œì˜ ì»¨í…Œì´ë„ˆì—ì„œëŠ” ì ‘ê·¼ ë¶ˆê°€

```bash
# 1. ex09 ìƒì„± í›„ ì´ë™
cd ex09

# 2. volume-test01.yml ì‘ì„±
apiVersion: v1
kind: pod
metadata:
  name: nginx-volume-01
spec:
  containers:
  - name: nginx-test01
    image: nginx:latest
    volumeMounts:
    - name: empty-test01
      mountPath: /mount01
  volumes:
  - name: empty-test01
    emptyDir: {}

# 3. íŒŒë“œ ì‹¤í–‰
kubectl apply -f volume-test01.yml

# 4. íŒŒë“œì— ì ‘ì† í›„ /mount01 ì´ë™ í›„ test.txt ìƒì„± í›„ ì¢…ë£Œë£Œ
kubectl exec -it nginx-volume-01 -- /bin/bash
cd mount01
echo "volume test" > ./test.txt
exit

# 5. íŒŒë“œ ì¢…ë£Œ í›„ ë‹¤ì‹œ ìƒì„±í•˜ê³  mount01 í™•ì¸ì¸
kubectl delete -f nginx-volume-01.yml
kubectl apply -f nginx-volume-01.yml
kubectl exec -it nginx-volume-01 -- /bin/bash
cd mount01
ls
```

### ğŸ”¸ 9.4.3 hostPath

hostPathëŠ” í˜¸ìŠ¤íŠ¸ ë…¸ë“œì˜ íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œë¶€í„° íŒŒì¼ì„ ë§ˆìš´íŠ¸í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤ ë”°ë¼ì„œ ë‹¤ë¥¸ íŒŒë“œë¼ë„  
ê°™ì€ ë…¸ë“œì—ì„œ ì‹¤í–‰ëœë‹¤ë©´ ë°ì´í„°ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŒ

(hostPath ë³¼ë¥¨ì€ 2024ë…„ ê¸°ì¤€ ë³´ì•ˆì´ìŠˆê°€ ë§ì•„ ê³µì‹ì ìœ¼ë¡œëŠ” ê°€ê¸‰ì  ì‚¬ìš©í•˜ì§€ ì•Šì„ê²ƒì„ ê¶Œê³ í•¨)

```bash
# 1. ì›Œì»¤ ë…¸ë“œì— ì ‘ì† í›„ /work/volhost01 ë””ë ‰í„°ë¦¬ ìƒì„±
mkdir -p ./work/volhost01

# 2. ë§ˆìŠ¤í„° ë…¸ë“œì—ì„œ ex10 ìƒì„± í›„ ì´ë™
cd ex10

# 3. volume-test02.yml ì‘ì„±
apiVersion: v1
kind:Pod
metadata:
  name: nginx-volume-02
spec:
  nodeSelector:
    kubernetes.io/hostname: my-k8s-cluster-worker
  containers:
  - name: nginx-test01
    image: nginx:latest
    volumeMounts:
    - name: hostpath-test01
      mountPath: /mount01
  volumes:
  - name: hostpath-test01
    hostPath:
      path: /work/volhost01
      type: DirectoryOrCreate

# 4. íŒŒë“œ ì ‘ì† í›„ ë§ˆìš´íŠ¸ ë””ë ‰í† ë¦¬ì— test01.txt ìƒì„±
kubectl apply -f volume-test02.yml
kubectl exec -it nginx-volume-02 -- /bin/bash
cd mount01
echo "hello world 01" > ./test01.txt
exit

# 5. ë‹¤ì‹œ ë°©ê¸ˆ ì›Œì»¤ ë…¸ë“œ ì ‘ì† í›„ test01 í™•ì¸
cat test01.txt

# 6. ì‹¤í–‰ì¤‘ì¸ íŒŒë“œ ì¢…ë£Œ í›„ ì¬ì ‘ì† í›„ í™•ì¸
kubectl delete -f volume-test02.yml
kubectl apply -f volume-test02.yml
kubectl exec -it nginx-volume-02 -- /bin/bash
cd mount01
ls
exit

# 7. volume-test03.yml ì‘ì„±
# ë‚˜ë¨¸ì§„ ë™ì¼í•˜ê²Œ
metadata.name: nginx-volume-03
kubernetes.io/hostname: my-k8s-cluster-worker2

# 8. ìƒˆë¡œìš´ íŒŒë“œ ìƒì„± í›„ í•´ë‹¹ ì›Œì»¤ì— ì ‘ì†í•˜ì—¬ test01.txt í™•ì¸
cd /work/volhost01
ls
```

ìƒˆë¡œìš´ íŒŒë“œëŠ” test01.txt ê°€ ìˆëŠ” my-k8s-cluster-worker ê°€ ì•„ë‹Œ my-k8s-cluster-worker2ì— ìƒì„±ë˜ì—ˆìœ¼ë¯€ë¡œ íŒŒë“œì— ì ‘ì†í•´ë„ /work/volhost01  
ë””ë ‰í† ë¦¬ê¹Œì§„ ì¡´ì¬í•˜ì§€ë§Œ íŒŒì¼ì€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ê±¸ í™•ì¸í•  ìˆ˜ ìˆìŒ

### ğŸ”¸ 9.4.4 PV

336 ~

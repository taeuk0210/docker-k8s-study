# ğŸ“˜ Chapter 9.2 ë””í”Œë¡œì´ë¨¼íŠ¸

## ğŸ“Œ í•™ìŠµ ëª©í‘œ

- ë””í”Œë¡œì´ë¨¼íŠ¸ ê°œë… í•™ìŠµ
- ë””í”Œë¡œì´ë¨¼íŠ¸ ì‹¤í–‰ ë°©ë²•

## ğŸ” í•™ìŠµ ë‚´ìš©

### ğŸ”¸ 9.2.1 ë””í”Œë¡œì´ë¨¼íŠ¸ ê°œë…

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” íŒŒë“œë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë””í”Œë¡œì´ë¨¼íŠ¸(ë ˆí”Œë¦¬ì¹´ì…‹ì˜ ì»¨íŠ¸ë¡¤ëŸ¬)ë¼ëŠ” ê°œë…ì„ ì‚¬ìš©í•¨

ë ˆí”Œë¦¬ì¹´ì…‹(íŒŒë“œë¥¼ ì§ì ‘ê´€ë¦¬)ì€ ëª…ì‹œë˜ì–´ ìˆê³  ìœ ì§€í•´ì•¼í•˜ëŠ” íŒŒë“œ ê°œìˆ˜ì— ëŒ€í•œ ê°€ìš©ì„±ì„ ë³´ì¦í•˜ëŠ”ë° ì‚¬ìš©ë˜ëŠ”ë°,  
ì´ ë ˆí”Œë¦¬ì¹´ì…‹ì„ ì§ì ‘ ë‹¤ë£¨ì§€ ì•Šê³  ë””í”Œë¡œì´ë¨¼íŠ¸ë¥¼ ì´ìš©í•¨

### ğŸ”¸ 9.2.2 ë””í”Œë¡œì´ë¨¼íŠ¸ ì‹¤í–‰

```bash
# 1. ë””í”Œë¡œì´ë¨¼íŠ¸ ìƒì„±
kubectl create deployment deploy-hello --image=hello-world

# 2. ì •ë³´ í™•ì¸
kubectl get all

# 3. ì‚­ì œ
kubectl delete deployment deploy-hello --image=hello-world
```

### ğŸ”¸ 9.2.3 ë ˆí”Œë¦¬ì¹´ì…‹ ì¡°ì •

```bash
# 1. ë””í”Œë¡œì´ë¨¼íŠ¸ ìƒì„±(replicas=3)
kubectl create deployment deploy-nginx --image=nginx --replicas=3

# 2. ì •ë³´ í™•ì¸
kubectl get all

# 3. íŒŒë“œ ì‚­ì œ
kubectl delete pod deploy-nginx-xxxxx-xxxx

# 4. ë‹¤ì‹œ ìƒì„±ëœê±° í™•ì¸
kubectl get all
```

### ğŸ”¸ 9.2.4 ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ í™œìš©í•œ ë””í”Œë¡œì´ë¨¼íŠ¸ ì‹¤í–‰

```bash
# 1. ex02 ë””ë ‰í„°ë¦¬ ìƒì„± í›„ ì´ë™
cd ex02

# 2. deploy-test01.yml ì‘ì„±

# íŒŒë“œëŠ” v1ë¡œ ìƒì„±í–ˆìœ¼ë‚˜ ë¦¬ì†ŒìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë””í”Œë¡œì´ë¨¼íŠ¸ì˜ ê²½ìš° apps/v1ì„ ì‚¬ìš©
apiVersion: apps/v1
kind: Deployment
metadata:
  name: deploy-test01
spec:
  replicas: 3
  # íŒŒë“œì— ë¼ë²¨ì„ ë¶™ì´ëŠ” ì˜µì…˜, selectorë¥¼ í™œìš©í•´ ë””í”Œë¡œì´ë¨¼íŠ¸ê°€ ê´€ë¦¬í•  íŒŒë“œë¥¼ ì—°ê²°
  selector:
    # íŒŒë“œ ìƒì„±í–ˆì„ ë•Œì˜ ì´ë¦„ê³¼ ë™ì¼í•´ì•¼ selectorë¥¼ í†µí•´ íŒŒë“œì™€ ë°”ì¸ë”©ë”©
    matchLabels:
      app.kubernetes.io/name: web-deploy
  template:
    metadata:
      labels:
        # ë””í”Œë¡œì´ë¨¼íŠ¸ê°€ ê´€ë¦¬í•  íŒŒë“œì˜ ë¼ë²¨
        app.kubernetes.io/name: web-deploy
    # íŒŒë“œì˜ ìŠ¤í™
    spec:
      containers:
        - name: nginx
          image: nginx:latest


# 3. ë””í”Œë¡œì´ë¨¼íŠ¸ ìƒì„±
kubectl apply -f deploy-test01.yml

# 4. ì •ë³´ í™•ì¸
kubectl get all

# 5. ì‚­ì œ
kubectl delete -f deploy-test01.yml
```

### ğŸ”¸ 9.2.5 ìŠ¤ì¼€ì¼

YAML íŒŒì¼ì˜ replicasë¥¼ ìˆ˜ì •í•˜ì—¬ íŒŒë“œì˜ ê°œìˆ˜ë¥¼ ìˆ˜ì •í•˜ê¸°

```bash
# 1. ex02ë¥¼ ex03ìœ¼ë¡œ ë³µì‚¬ í›„ ì´ë™
cd ex03

# 2. deploy-test02.yml ë³µì‚¬ í›„ replicas: 5 ë¡œ ìˆ˜ì •
nano deploy-test02.yml

# 3. ë””í”Œë¡œì´ë¨¼íŠ¸ ìƒì„±
kubectl apply -f deploy-test01.yml

# 4. íŒŒë“œ ê°œìˆ˜ í™•ì¸
kubectl get pods

# 5. ë³€ê²½ëœ ë ˆí”Œë¦¬ì¹´ ìˆ˜ ì ìš©
kubectl apply -f deploy-test02.yml

# 6. íŒŒë“œ ê°œìˆ˜ í™•ì¸
kubectl get pods

# 7. ì‚­ì œ
kubectl delete -f deploy-test02.yml
```

### ğŸ”¸ 9.2.6 ~ 9.2.7 ë¡¤ì•„ì›ƒ & ë¡¤ë°±

ë¡¤ì•„ì›ƒì€ ì»¨í…Œì´ë„ˆì˜ ì—…ë°ì´íŠ¸ë¥¼ ì˜ë¯¸í•˜ê³  ë°˜ëŒ€ë¡œ ë¡¤ë°±ì€ ì—…ë°ì´íŠ¸ ì´ì „ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê²ƒ

```bash
# 1. ex02ë¥¼ ex04ìœ¼ë¡œ ë³µì‚¬ í›„ ì´ë™
cd ex04

# 2. deploy-test01.ymlë¥¼ 03, 04 ë³µì‚¬ í›„ 03ì˜ nginxëŠ” 1.24 04ì˜ nginxëŠ” 1.25ë¡œ ë³€ê²½
nano deploy-test04.yml

# 3. ë””í”Œë¡œì´ë¨¼íŠ¸ ìƒì„±
kubectl apply -f deploy-test03.yml

# 4. íŒŒë“œì˜ Nginx ë²„ì „ í™•ì¸
kubectl describe deployment deploy-test01

# 5. ë³€ê²½ëœ YAML íŒŒì¼ ì ìš©ìš©
kubectl apply -f deploy-test04.yml

# 6. íŒŒë“œì˜ Nginx ë²„ì „ í™•ì¸
kubectl describe deployment deploy-test01

# 7. ë¡¤ë°±
kubectl rollout undo deployment deploy-test01

# 8. íŒŒë“œì˜ Nginx ë²„ì „ í™•ì¸
kubectl describe deployment deploy-test01
```
